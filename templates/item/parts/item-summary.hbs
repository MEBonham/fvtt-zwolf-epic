{{!-- templates/item/parts/item-summary.hbs --}}
<div class="tab summary-tab" data-group="primary" data-tab="summary">
  <div class="summary-container">
    <h2>{{item.name}} Summary</h2>
    
    <!-- Basic Information Section -->
    <section class="summary-section basic-info">
      <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
      <div class="summary-content">
        <div class="summary-row">
          <span class="summary-label">Type:</span>
          <span class="summary-value">{{localize (concat 'ZWOLF.ItemType' (capitalize itemType))}}</span>
        </div>
        
        {{#if system.tags}}
        <div class="summary-row">
          <span class="summary-label">Tags:</span>
          <span class="summary-value">{{system.tags}}</span>
        </div>
        {{/if}}
        
        {{#if system.characterTags}}
        <div class="summary-row">
          <span class="summary-label">Character Tags:</span>
          <span class="summary-value">{{system.characterTags}}</span>
        </div>
        {{/if}}
        
        {{#if system.buildPoints}}
        <div class="summary-row">
          <span class="summary-label">Build Points:</span>
          <span class="summary-value">{{system.buildPoints}}</span>
        </div>
        {{/if}}
        
        {{#if system.knacksProvided}}
        <div class="summary-row">
          <span class="summary-label">Knacks Provided:</span>
          <span class="summary-value">{{system.knacksProvided}}</span>
        </div>
        {{/if}}
        
        {{#if system.requiredKnackTag}}
        <div class="summary-row">
          <span class="summary-label">Required Knack Tag:</span>
          <span class="summary-value">{{system.requiredKnackTag}}</span>
        </div>
        {{/if}}
      </div>
    </section>

    <!-- Equipment-specific Section -->
    {{#if (eq itemType "equipment")}}
    <section class="summary-section equipment-details">
      <h3><i class="fas fa-toolbox"></i> Equipment Details</h3>
      <div class="summary-content">
        <div class="summary-row">
          <span class="summary-label">Quantity:</span>
          <span class="summary-value">{{#if (eq system.quantity "many")}}{{localize 'ZWOLF.Many'}}{{else}}{{system.quantity}}{{/if}}</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Price:</span>
          <span class="summary-value">{{system.price}}</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Bulk:</span>
          <span class="summary-value">{{system.bulk}}</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Structure:</span>
          <span class="summary-value">{{system.structure}}</span>
        </div>
        {{#if system.placement}}
        <div class="summary-row">
          <span class="summary-label">Current Placement:</span>
          <span class="summary-value">{{localize (concat 'ZWOLF.' (capitalize system.placement))}}</span>
        </div>
        {{/if}}
        {{#if system.requiredPlacement}}
        <div class="summary-row">
          <span class="summary-label">Required Placement:</span>
          <span class="summary-value">{{localize (concat 'ZWOLF.' (capitalize system.requiredPlacement))}}</span>
        </div>
        {{/if}}
      </div>
    </section>
    {{/if}}

    <!-- Ancestry-specific Section -->
    {{#if (eq itemType "ancestry")}}
    <section class="summary-section ancestry-details">
      <h3><i class="fas fa-users"></i> Ancestry Details</h3>
      <div class="summary-content">
        {{#if system.sizeOptions}}
        <div class="summary-row">
          <span class="summary-label">Size Options:</span>
          <span class="summary-value">
            {{#each system.sizeOptions as |size|}}
              {{localize (concat 'ZWOLF.' (capitalize size))}}{{#unless @last}}, {{/unless}}
            {{/each}}
          </span>
        </div>
        {{/if}}
        {{#if system.required}}
        <div class="summary-row full-width">
          <span class="summary-label">Requirements:</span>
          <div class="summary-rich-text">{{{enrichedRequired}}}</div>
        </div>
        {{/if}}
        {{#if system.knackMenu}}
        <div class="summary-row full-width">
          <span class="summary-label">Knack Menu:</span>
          <div class="summary-rich-text">{{{enrichedKnackMenu}}}</div>
        </div>
        {{/if}}
      </div>
    </section>
    {{/if}}

    <!-- Talent-specific Section -->
    {{#if (eq itemType "talent")}}
    <section class="summary-section talent-details">
      <h3><i class="fas fa-star"></i> Talent Details</h3>
      <div class="summary-content">
        {{#if system.required}}
        <div class="summary-row full-width">
          <span class="summary-label">Requirements:</span>
          <div class="summary-rich-text">{{{enrichedRequired}}}</div>
        </div>
        {{/if}}
      </div>
    </section>
    {{/if}}

    <!-- Fundament-specific Section -->
    {{#if (eq itemType "fundament")}}
    <section class="summary-section fundament-functions">
      <h3><i class="fas fa-function"></i> Formulae</h3>
      <div class="summary-content">
        <div class="summary-row">
          <span class="summary-label">Vitality Formula:</span>
          <span class="summary-value">{{#if system.vitalityFunction}}{{system.vitalityFunction}}{{else}}standard{{/if}}</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Coast Formula:</span>
          <span class="summary-value">{{#if system.coastFunction}}{{system.coastFunction}}{{else}}standard{{/if}}</span>
        </div>
      </div>
    </section>
    {{/if}}

    <!-- Track-specific Section -->
    {{#if (eq itemType "track")}}
    <section class="summary-section track-details">
      <h3><i class="fas fa-route"></i> Track Details</h3>
      <div class="summary-content">
        {{#if system.required}}
        <div class="summary-row full-width">
          <span class="summary-label">Requirements:</span>
          <div class="summary-rich-text">{{{enrichedRequired}}}</div>
        </div>
        {{/if}}
      </div>
    </section>

    <!-- Track Tiers Summary -->
    {{#if system.tiers}}
    <section class="summary-section track-tiers">
      <h3><i class="fas fa-layer-group"></i> Track Tiers</h3>
      {{#each system.tiers as |tier tierKey|}}
      {{#if tier.talentMenu}}
      <div class="tier-summary">
        <h4>Tier {{#if (eq tierKey "tier1")}}1{{else if (eq tierKey "tier2")}}2{{else if (eq tierKey "tier3")}}3{{else if (eq tierKey "tier4")}}4{{else if (eq tierKey "tier5")}}5{{/if}}</h4>
        <div class="summary-row full-width">
          <span class="summary-label">Talent Menu:</span>
          <div class="summary-rich-text">{{{tier.enrichedTalentMenu}}}</div>
        </div>
        {{#if tier.characterTags}}
        <div class="summary-row">
          <span class="summary-label">Character Tags:</span>
          <span class="summary-value">{{tier.characterTags}}</span>
        </div>
        {{/if}}
        {{#if tier.sideEffects.knacksProvided}}
        <div class="summary-row">
          <span class="summary-label">Knacks Provided:</span>
          <span class="summary-value">{{tier.sideEffects.knacksProvided}}</span>
        </div>
        {{/if}}
{{#if tier.grantedAbilitiesCount}}
<div class="summary-row">
  <span class="summary-label">Granted Abilities:</span>
  <span class="summary-value">{{tier.grantedAbilitiesCount}} {{#if (eq tier.grantedAbilitiesCount 1)}}ability{{else}}abilities{{/if}}</span>
</div>
{{/if}}
      </div>
      {{/if}}
      {{/each}}
    </section>
    {{/if}}
    {{/if}}

    <!-- Description Section -->
    {{#if system.description}}
    <section class="summary-section description">
      <h3><i class="fas fa-scroll"></i> Description</h3>
      <div class="summary-content">
        <div class="summary-rich-text">{{{enrichedDescription}}}</div>
      </div>
    </section>
    {{/if}}

    <!-- Granted Abilities Section -->
    {{#if grantedAbilitiesArray}}
    {{#if grantedAbilitiesArray.length}}
    <section class="summary-section granted-abilities">
      <h3><i class="fas fa-magic"></i> Granted Abilities ({{grantedAbilitiesArray.length}})</h3>
      <div class="abilities-summary">
        {{#each grantedAbilitiesArray as |ability|}}
        <div class="ability-summary">
          <div class="ability-summary-header">
            <strong>{{ability.name}}</strong>
            <span class="ability-type-badge {{ability.type}}">{{capitalize ability.type}}</span>
          </div>
          {{#if ability.tags}}
          <div class="ability-tags">
            <i class="fas fa-tags"></i> {{ability.tags}}
          </div>
          {{/if}}
          {{#if ability.enrichedDescription}}
          <div class="ability-description">
            {{{ability.enrichedDescription}}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </div>
    </section>
    {{/if}}
    {{/if}}

    <!-- Side Effects Section -->
    {{#unless (eq itemType "track")}}
      {{#if system.sideEffects}}
      <section class="summary-section side-effects">
        <h3><i class="fas fa-cogs"></i> Side Effects</h3>
        <div class="summary-content">
          {{#if system.sideEffects.knacksProvided}}
          <div class="summary-row">
            <span class="summary-label">Knacks Provided:</span>
            <span class="summary-value">{{system.sideEffects.knacksProvided}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.speedProgression}}
          <div class="summary-row">
            <span class="summary-label">Speed Progression:</span>
            <span class="summary-value">{{localize (concat 'ZWOLF.' (capitalize system.sideEffects.speedProgression))}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.toughnessTNProgression}}
          <div class="summary-row">
            <span class="summary-label">Toughness TN Progression:</span>
            <span class="summary-value">{{localize (concat 'ZWOLF.' (capitalize system.sideEffects.toughnessTNProgression))}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.destinyTNProgression}}
          <div class="summary-row">
            <span class="summary-label">Destiny TN Progression:</span>
            <span class="summary-value">{{localize (concat 'ZWOLF.' (capitalize system.sideEffects.destinyTNProgression))}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.nightsightRadius}}
          <div class="summary-row">
            <span class="summary-label">Nightsight Radius:</span>
            <span class="summary-value">{{system.sideEffects.nightsightRadius}} {{localize 'ZWOLF.Meters'}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.darkvisionRadius}}
          <div class="summary-row">
            <span class="summary-label">Darkvision Radius:</span>
            <span class="summary-value">{{system.sideEffects.darkvisionRadius}} {{localize 'ZWOLF.Meters'}}</span>
          </div>
          {{/if}}
          
          {{#if system.sideEffects.maxBulkBoost}}
          <div class="summary-row">
            <span class="summary-label">Max Bulk Boost:</span>
            <span class="summary-value">+{{system.sideEffects.maxBulkBoost}} {{localize 'ZWOLF.Bulk'}}</span>
          </div>
          {{/if}}
        </div>
      </section>
      {{/if}}
    {{/unless}}

    <!-- Active Effects Section -->
    {{#if item.effects}}
    {{#if item.effects.length}}
    <section class="summary-section active-effects">
      <h3><i class="fas fa-sparkles"></i> Active Effects ({{item.effects.length}})</h3>
      <div class="summary-content">
        {{#each item.effects as |effect|}}
        <div class="summary-row">
          <span class="summary-label">{{effect.name}}:</span>
          <span class="summary-value effect-status {{#if effect.disabled}}disabled{{else}}enabled{{/if}}">
            {{#if effect.disabled}}{{localize 'EFFECT.Disabled'}}{{else}}{{localize 'EFFECT.Enabled'}}{{/if}}
          </span>
        </div>
        {{/each}}
      </div>
    </section>
    {{/if}}
    {{/if}}

    {{!-- Footer Information --}}
    <section class="summary-footer">
      <div class="summary-metadata">
        {{#if isLocked}}
        <div class="lock-status">
          <i class="fas fa-lock"></i> {{localize 'ZWOLF.ItemLocked'}}
        </div>
        {{/if}}
        <div class="item-id">
          <span class="summary-label">ID:</span>
          <span class="summary-value">{{item.id}}</span>
        </div>
      </div>
    </section>
  </div>
</div>