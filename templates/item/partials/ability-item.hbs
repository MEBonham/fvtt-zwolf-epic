{{!-- templates/item/partials/ability-item.hbs --}}
<div class="ability-item" data-ability-index="{{index}}">
  <div class="ability-header">
    <input type="text" 
           name="{{nameTarget}}" 
           value="{{ability.name}}" 
           placeholder="Ability Name"
           {{#unless editable}}disabled{{/unless}} />
    
    <select name="{{typeTarget}}" {{#unless editable}}disabled{{/unless}}>
      <option value="passive" {{#if (eq ability.type "passive")}}selected{{/if}}>
        Passive
      </option>
      <option value="active" {{#if (eq ability.type "active")}}selected{{/if}}>
        Active
      </option>
      <option value="reaction" {{#if (eq ability.type "reaction")}}selected{{/if}}>
        Reaction
      </option>
    </select>

    {{#if editable}}
    <a class="ability-control delete-ability" 
       data-action="{{deleteAction}}" 
       data-ability-index="{{index}}" 
       title="Delete Ability">
      <i class="fas fa-trash"></i>
      <span>Delete</span>
    </a>
    {{/if}}
  </div>

  <div class="ability-tags">
    <label>Tags:</label>
    <input type="text" 
           name="{{tagsTarget}}" 
           value="{{ability.tags}}" 
           placeholder="Tags (comma-separated)"
           {{#unless editable}}disabled{{/unless}} />
  </div>

  <div class="ability-description">
    <label>Description:</label>
    
    {{#if editable}}
      {{!-- V2 Framework Editor with enriched content --}}
      <div class="form-group editor">
        {{#if ability.enrichedDescription}}
          {{editor ability.description target=descriptionTarget button=true owner=owner editable=editable engine="prosemirror"}}
        {{else}}
          {{editor "" target=descriptionTarget button=true owner=owner editable=editable engine="prosemirror"}}
        {{/if}}
      </div>
    {{else}}
      <div class="editor-content">
        {{#if ability.description}}
          {{{ability.description}}}
        {{else}}
          <em>No description</em>
        {{/if}}
      </div>
    {{/if}}
  </div>
</div>