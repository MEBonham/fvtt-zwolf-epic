{{!-- templates/item/partials/side-effects-form.hbs --}}
<div class="side-effects-form">

  <!-- Proficiency Grants Section -->
  <div class="proficiency-grants">
    <h4><i class="fas fa-certificate"></i> {{localize 'ZWOLF.ProficiencyGrants'}}</h4>
    <p class="notes">{{localize 'ZWOLF.ProficiencyGrantsHint'}}</p>
    
    <!-- Granted Proficiency -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.GrantedProficiency'}}</label>
      <select name="{{pathPrefix}}.grantedProficiency" data-dtype="String">
        <option value="" {{selected '' sideEffects.grantedProficiency}}>{{localize 'ZWOLF.None'}}</option>
        
        <optgroup label="{{localize 'ZWOLF.SeedProficiencies'}}">
          {{#each config.proficiencies}}
            {{#if (eq this.type 'seed')}}
              <option value="{{@key}}" {{selected @key ../sideEffects.grantedProficiency}}>{{localize this.label}}</option>
            {{/if}}
          {{/each}}
        </optgroup>
        
        <optgroup label="{{localize 'ZWOLF.WeaponProficiencies'}}">
          {{#each config.proficiencies}}
            {{#if (eq this.type 'weapon')}}
              <option value="{{@key}}" {{selected @key ../sideEffects.grantedProficiency}}>{{localize this.label}}</option>
            {{/if}}
          {{/each}}
        </optgroup>
        
        <optgroup label="{{localize 'ZWOLF.MiscellaneousProficiencies'}}">
          {{#each config.proficiencies}}
            {{#if (eq this.type 'miscellaneous')}}
              <option value="{{@key}}" {{selected @key ../sideEffects.grantedProficiency}}>{{localize this.label}}</option>
            {{/if}}
          {{/each}}
        </optgroup>
      </select>
      <p class="notes">{{localize 'ZWOLF.GrantedProficiencyHint'}}</p>
    </div>
  </div>

  {{#if (or (eq itemType "talent") (eq itemType "track"))}}
  <!-- Knacks Provided Section (Talents and Tiers only) -->
  <div class="knacks-provided">
    <h4><i class="fas fa-star"></i> {{localize 'ZWOLF.KnacksProvided'}}</h4>
    <div class="form-group">
      <label>{{localize 'ZWOLF.KnacksProvided'}}</label>
      <input type="number" name="{{pathPrefix}}.knacksProvided" 
             value="{{sideEffects.knacksProvided}}" 
             data-dtype="Number" min="0" max="10" placeholder="0"/>
      <p class="notes">{{localize 'ZWOLF.KnacksProvidedHint'}}</p>
    </div>
  </div>
  {{/if}}
  
  <!-- Progression Upgrades Section -->
  <div class="progression-upgrades">
    <h4><i class="fas fa-arrow-up"></i> {{localize 'ZWOLF.ProgressionUpgrades'}}</h4>
    
    <!-- Speed Upgrade -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.SpeedProgression'}}</label>
      <select name="{{pathPrefix}}.speedProgression" data-dtype="String">
        <option value="" {{selected '' sideEffects.speedProgression}}>{{localize 'ZWOLF.NoUpgrade'}} (+0)</option>
        <option value="mediocre" {{selected 'mediocre' sideEffects.speedProgression}}>{{localize 'ZWOLF.Mediocre'}}</option>
        <option value="moderate" {{selected 'moderate' sideEffects.speedProgression}}>{{localize 'ZWOLF.Moderate'}}</option>
        <option value="specialty" {{selected 'specialty' sideEffects.speedProgression}}>{{localize 'ZWOLF.Specialty'}}</option>
        <option value="awesome" {{selected 'awesome' sideEffects.speedProgression}}>{{localize 'ZWOLF.Awesome'}}</option>
      </select>
      <p class="notes">{{localize 'ZWOLF.SpeedProgressionHint'}}</p>
    </div>
    
    <!-- Toughness TN Upgrade -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.ToughnessTNProgression'}}</label>
      <select name="{{pathPrefix}}.toughnessTNProgression" data-dtype="String">
        <option value="" {{selected '' sideEffects.toughnessTNProgression}}>{{localize 'ZWOLF.NoUpgrade'}} ({{localize 'ZWOLF.Mediocre'}})</option>
        <option value="moderate" {{selected 'moderate' sideEffects.toughnessTNProgression}}>{{localize 'ZWOLF.Moderate'}}</option>
        <option value="specialty" {{selected 'specialty' sideEffects.toughnessTNProgression}}>{{localize 'ZWOLF.Specialty'}}</option>
        <option value="awesome" {{selected 'awesome' sideEffects.toughnessTNProgression}}>{{localize 'ZWOLF.Awesome'}}</option>
      </select>
      <p class="notes">{{localize 'ZWOLF.ToughnessTNProgressionHint'}}</p>
    </div>
    
    <!-- Destiny TN Upgrade -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.DestinyTNProgression'}}</label>
      <select name="{{pathPrefix}}.destinyTNProgression" data-dtype="String">
        <option value="" {{selected '' sideEffects.destinyTNProgression}}>{{localize 'ZWOLF.NoUpgrade'}} ({{localize 'ZWOLF.Moderate'}})</option>
        <option value="specialty" {{selected 'specialty' sideEffects.destinyTNProgression}}>{{localize 'ZWOLF.Specialty'}}</option>
        <option value="awesome" {{selected 'awesome' sideEffects.destinyTNProgression}}>{{localize 'ZWOLF.Awesome'}}</option>
      </select>
      <p class="notes">{{localize 'ZWOLF.DestinyTNProgressionHint'}}</p>
    </div>
  </div>
  
  <!-- Vision Radius Upgrades Section -->
  <div class="vision-radius-upgrades">
    <h4><i class="fas fa-eye"></i> {{localize 'ZWOLF.VisionRadiusUpgrades'}}</h4>
    <p class="notes">{{localize 'ZWOLF.VisionRadiusUpgradesHint'}}</p>
    
    <!-- Nightsight Radius -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.NightsightRadius'}}</label>
      <div class="vision-input-group">
        <input type="number" name="{{pathPrefix}}.nightsightRadius" 
               value="{{sideEffects.nightsightRadius}}" 
               data-dtype="Number" min="0" step="0.5" 
               placeholder="{{localize 'ZWOLF.DefaultRadius'}}: 1.0"/>
        <span class="input-suffix">{{localize 'ZWOLF.Meters'}}</span>
      </div>
      <p class="notes">{{localize 'ZWOLF.NightsightRadiusHint'}}</p>
    </div>
    
    <!-- Darkvision Radius -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.DarkvisionRadius'}}</label>
      <div class="vision-input-group">
        <input type="number" name="{{pathPrefix}}.darkvisionRadius" 
               value="{{sideEffects.darkvisionRadius}}" 
               data-dtype="Number" min="0" step="0.5" 
               placeholder="{{localize 'ZWOLF.DefaultRadius'}}: 0.5"/>
        <span class="input-suffix">{{localize 'ZWOLF.Meters'}}</span>
      </div>
      <p class="notes">{{localize 'ZWOLF.DarkvisionRadiusHint'}}</p>
    </div>
  </div>

  {{#if (eq itemType "equipment")}}
  <!-- Bulk Capacity Upgrades Section (Equipment only) -->
  <div class="bulk-upgrades">
    <h4><i class="fas fa-weight-hanging"></i> {{localize 'ZWOLF.BulkCapacityUpgrades'}}</h4>
    <p class="notes">{{localize 'ZWOLF.BulkCapacityUpgradesHint'}}</p>
    
    <!-- Max Bulk Boost -->
    <div class="form-group">
      <label>{{localize 'ZWOLF.MaxBulkBoost'}}</label>
      <div class="bulk-input-group">
        <input type="number" name="{{pathPrefix}}.maxBulkBoost" 
               value="{{sideEffects.maxBulkBoost}}" 
               data-dtype="Number" min="0" step="1" 
               placeholder="0"/>
        <span class="input-suffix">{{localize 'ZWOLF.Bulk'}}</span>
      </div>
      <p class="notes">{{localize 'ZWOLF.MaxBulkBoostHint'}}</p>
    </div>
  </div>
  {{/if}}
  
  <!-- Placeholder for Future Side Effects -->
  <div class="future-side-effects">
    <h4><i class="fas fa-plus-circle"></i> {{localize 'ZWOLF.FutureSideEffects'}}</h4>
    <p class="notes">{{localize 'ZWOLF.FutureSideEffectsHint'}}</p>
  </div>
</div>